{% extends "web/base.html" %}
{% load static %}


{% block head %}
<title>Vietnam Situation</title>
<link rel="stylesheet" type="text/css" href="{% static 'web/css/vn.css' %}" />

{% endblock %} {% block body %}
<div class="container-fluid">
  <div class="m-10 mt-3 mb-4">
    <h3 class="text-center text-gray-800">Vietnam Summary</h3>
  </div>
  <div class="row">

    <div class="col-xl-3 col-md-6 mb-4">
      <div class="card border-danger shadow h-100 py-2">
        <div class="card-body">
          <div class="row no-gutters align-items-center">
            <div class="col mr-2">
              <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">Total Cases</div>
              <div class="h5 mb-0 font-weight-bold text-gray-800 number_with_commas">{{ summary.4 }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
      <div class="card border-dark shadow h-100 py-2">
        <div class="card-body">
          <div class="row no-gutters align-items-center">
            <div class="col mr-2">
              <div class="text-xs font-weight-bold text-dark text-uppercase mb-1">Total Deaths</div>
              <div class="h5 mb-0 font-weight-bold text-gray-800 number_with_commas">{{ summary.1 }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
      <div class="card border-warning shadow h-100 py-2">
        <div class="card-body">
          <div class="row no-gutters align-items-center">
            <div class="col mr-2">
              <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Active Cases</div>
              <div class="h5 mb-0 font-weight-bold text-gray-800 number_with_commas">{{ summary.3 }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
      <div class="card border-success shadow h-100 py-2">
        <div class="card-body">
          <div class="row no-gutters align-items-center">
            <div class="col mr-2">
              <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Recovered</div>
              <div class="h5 mb-0 font-weight-bold text-gray-800 number_with_commas">{{ summary.2 }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="h-100 m-10">
    <div class="w-50 h-75 float-left" id="age_chart"></div>
    <div class="w-50 h-75 pl-5 float-right" id="gender_chart"></div>
  </div>
</div>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>


<!-- case by age -->
<script type="text/javascript">
  google.charts.load("current", { packages: ["corechart"] });
  google.charts.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = new google.visualization.DataTable()
    data.addColumn('string', 'Patient')
    data.addColumn('number', 'Age')
    data.addRows({{ ages| safe}})

  if (lang == 'en') {
    var options = {
      title: 'Vietnam COVID-19 cases by Ages',
      titleTextStyle: {
        color: '#000000',
        fontName: 'Times New Roman',
        fontSize: 25,
        bold: true,    // true or false
        // italic: <boolean>   // true of false
      },
      backgroundColor: '#fbf9f9',
      legend: { position: 'right' },
    };
  }
  else {
    var options = {
      title: 'CA NHIỄM THEO ĐỘ TUỔI',
      titleTextStyle: {
        color: '#000000',
        fontName: 'Times New Roman',
        fontSize: 25,
        bold: true,    // true or false
        // italic: <boolean>   // true of false
      },
      backgroundColor: '#fbf9f9',
      legend: { position: 'right' },
    };
  }
  var chart = new google.visualization.Histogram(document.getElementById('age_chart'));
  chart.draw(data, options);
    }
</script>

<!-- case by gender -->
<script type="text/javascript">
  google.charts.load('current', { 'packages': ['bar'] });
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Date')
    data.addColumn('number', 'Male');
    data.addColumn('number', 'Female');

    data.addRows({{ sexs| safe }});


  if (lang == 'en') {
    var options = {
      title: 'Vietnam COVID-19 cases by Gender',
      titleTextStyle: {
        color: '#000000',
        fontName: 'Times New Roman',
        fontSize: 25,
        bold: true,    // true or false
        // italic: <boolean>   // true of false
      },
      backgroundColor: '#fbf9f9',
      isStacked: true,
    };
  }
  else {
    var options = {
      title: 'CA NHIỄM THEO GIỚI TÍNH',
      titleTextStyle: {
        color: '#000000',
        fontName: 'Times New Roman',
        fontSize: 25,
        bold: true,    // true or false
        // italic: <boolean>   // true of false
      },
      backgroundColor: '#fbf9f9',
      isStacked: true,
    };
  }
  var chart = new google.charts.Bar(document.getElementById('gender_chart'));

  chart.draw(data, google.charts.Bar.convertOptions(options));
    }
</script>

<!-- map chart -->
<script type="text/javascript">
  google.charts.load('current', {
    'packages': ['geochart'],
    // Note: you will need to get a mapsApiKey for your project.
    // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
    'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
  });
  google.charts.setOnLoadCallback(drawRegionsMap);

  function drawRegionsMap() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', "City/Province")
    data.addColumn('number', 'Confirmed')
    {% for city in cities_geomap %}
    data.addRow(['{{ city.0}}', {{ city.1 }}]);
  {% endfor %}

  var options = {
    region: 'VN',
    colorAxis: { colors: ['green', 'yellow', 'orange', 'red'] },
    backgroundColor: '#81d4fa',
    datalessRegionColor: '#f8bbd0',
    defaultColor: '#f5f5f5',
    resolution: "provinces"
  };

  var chart = new google.visualization.GeoChart(document.getElementById('geochart-colors'));
  chart.draw(data, options);
    };
</script>

<script type="text/javascript" src="{% static 'web/js/vn_view.js' %}"></script>

{% endblock %}