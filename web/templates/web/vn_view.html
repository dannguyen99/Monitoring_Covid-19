{% extends "web/base.html" %}
{% load static %}


{% block head %}
<title>Vietnam Situation</title>
<link rel="stylesheet" type="text/css" href="{% static 'web/css/vn.css' %}" />
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css">


<script type="text/javascript" charset="utf8"
  src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" charset="utf8"
  src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>

{% endblock %} {% block body %}
<div class="container-fluid">
  <div class="m-10 mt-3 mb-4">
    <h3 class="text-center text-gray-800">Vietnam Summary</h3>
  </div>
  <div class="row">

    <div class="col-xl-2 col-md-6 mb-4">
      <div class="card border-danger shadow h-100 py-2">
        <div class="card-body">
          <div class="row no-gutters align-items-center">
            <div class="col mr-2">
              <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">New Cases</div>
              <div class="h5 mb-0 font-weight-bold text-gray-800 number_with_commas">{{ summary.5 }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-2 col-md-6 mb-4">
      <div class="card border-danger shadow h-100 py-2">
        <div class="card-body">
          <div class="row no-gutters align-items-center">
            <div class="col mr-2">
              <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">Total Cases</div>
              <div class="h5 mb-0 font-weight-bold text-gray-800 number_with_commas">{{ summary.4 }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-2 col-md-6 mb-4">
      <div class="card border-dark shadow h-100 py-2">
        <div class="card-body">
          <div class="row no-gutters align-items-center">
            <div class="col mr-2">
              <div class="text-xs font-weight-bold text-dark text-uppercase mb-1">New Deaths</div>
              <div class="h5 mb-0 font-weight-bold text-gray-800 number_with_commas">{{ summary.6 }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-2 col-md-6 mb-4">
      <div class="card border-dark shadow h-100 py-2">
        <div class="card-body">
          <div class="row no-gutters align-items-center">
            <div class="col mr-2">
              <div class="text-xs font-weight-bold text-dark text-uppercase mb-1">Total Deaths</div>
              <div class="h5 mb-0 font-weight-bold text-gray-800 number_with_commas">{{ summary.2 }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-2 col-md-6 mb-4">
      <div class="card border-warning shadow h-100 py-2">
        <div class="card-body">
          <div class="row no-gutters align-items-center">
            <div class="col mr-2">
              <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Active Cases</div>
              <div class="h5 mb-0 font-weight-bold text-gray-800 number_with_commas">{{ summary.3 }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-2 col-md-6 mb-4">
      <div class="card border-success shadow h-100 py-2">
        <div class="card-body">
          <div class="row no-gutters align-items-center">
            <div class="col mr-2">
              <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Recovered</div>
              <div class="h5 mb-0 font-weight-bold text-gray-800 number_with_commas">{{ summary.1 }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="row">

    <div class="col-xl-7 col-lg-7">
      <div class="card shadow mb-4">
        <div class="card-header py-3">
          <h6 class="m-0 font-weight-bold text-dark">Daily Confirmed and Death Cases(Last 3 months)</h6>
        </div>
        <div class="card-body">
          <div id="daily_linechart"></div>
        </div>
      </div>
    </div>

    <div class="col-xl-5 col-lg-7">

      <div class="card shadow mb-4">
        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
          <h6 class="m-0 font-weight-bold text-dark">Vietnam COVID-19 Map</h6>
        </div>
        <div id="geochart-colors" style="height: 540px;"></div>
      </div>
    </div>

  </div>


  <div class="row">

    <div class="col-xl-8 col-lg-7">
      <div class="card shadow mb-4">
        <div class="card-header py-3">
          <h6 class="m-0 font-weight-bold text-dark">Summary by City</h6>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered" id="dataTable">
              <thead>
                <tr class="table text-center">
                  <th class="lang" key="city">City/Province</th>
                  <th class="lang" key="total_cases">Total Cases</th>
                  <th class="lang" key="active">Active</th>
                  <th class="lang" key="recover">Recovered</th>
                  <th class="lang" key="death">Death</th>
                </tr>
              </thead>
              <tbody style="overflow-y: auto; height: 200px;">
                {% for city in cities_summary %}
                <tr class="table text-center">
                  <td>{{ city.0 }}</td>
                  <td>{{ city.1 }}</td>
                  <td>{{ city.2 }}</td>
                  <td>{{ city.3 }}</td>
                  <td>{{ city.4 }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-4 col-lg-7">

      <div class="card shadow mb-4">
        <div class="card-header py-3">
          <h6 class="m-0 font-weight-bold text-dark">COVID-19 Incidence Rate by Gender</h6>
        </div>
        <div class="card-body">
          <div id="gender_piechart" style="height: 248;"></div>
        </div>
      </div>

      <div class="card shadow mb-4">
        <div class="card-header py-3">
          <h6 class="m-0 font-weight-bold text-dark">Case By Nationality</h6>
        </div>
        <div class="card-body">
          <div id="piechart_nationality" style="height: 248;"></div>
        </div>
      </div>

    </div>


  </div>

  <div class="row">

    <div class="col-xl-6 col-lg-7">
      <div class="card shadow mb-4">
        <div class="card-header py-3">
          <h6 class="m-0 font-weight-bold text-dark">COVID-19 Cases by Age Ranges</h6>
        </div>
        <div class="card-body">
          <div id="age_chart" style="height: 500px;"></div>
        </div>
      </div>
    </div>

    <div class="col-xl-6 col-lg-7">
      <div class="card shadow mb-4">
        <div class="card-header py-3">
          <h6 class="m-0 font-weight-bold text-dark">Case by Gender</h6>
        </div>
        <div class="card-body">
          <div id="gender_chart" style="height: 500px;"></div>
        </div>
      </div>
    </div>

  </div>
</div>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!-- case by gender -->
<script type="text/javascript">
  google.charts.load('current', { 'packages': ['bar'] });
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Date')
    data.addColumn('number', 'Male');
    data.addColumn('number', 'Female');

    data.addRows({{ sexs| safe }});


  if (lang == 'en') {
    var options = {
      isStacked: true,
    };
  }
  else {
    var options = {
      isStacked: true,
    };
  }
  var chart = new google.charts.Bar(document.getElementById('gender_chart'));

  chart.draw(data, google.charts.Bar.convertOptions(options));
    }
</script>
<script type="text/javascript" src="{% static 'web/js/vn_view.js' %}"></script>
{% endblock %}