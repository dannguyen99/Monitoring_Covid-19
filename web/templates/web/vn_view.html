{% extends "web/base.html" %}

{% block head %}
<title>Vietnam Situation</title>

<style>
  table {
    border-collapse: collapse;
    border-spacing: 0;
    border: 1px solid #ddd;
    width: auto;
  }

  .fixed_header tbody {
    display: block;
    overflow-y: auto;
    height: 200px;
  }

  .fixed_header thead tr {
    display: block;
  }
</style>
{% endblock %}

{% block body %}
<div class="main-area">
  <!-- summary of cases -->
  <div class="summary-cases">
    <h3 class="text-center">Summary of Cases in Vietnam</h3>
    <div clss="table-responsive">
      <table class="table table-bordered">
        <thead>
          <tr class="table text-center">
            <th scope="col">Total Cases</th>
            <th scope="col">Active</th>
            <th scope="col">Recovered</th>
            <th scope="col">Death</th>
          </tr>
          <tr class="table text-center">
            <td scope="col">{{ summary.1 }}</td>
            <td scope="col">{{ summary.3 }}</td>
            <td scope="col">{{ summary.4 }}</td>
            <td scope="col">{{ summary.2 }}</td>
          </tr>
        </thead>
      </table>
    </div>
  </div>
</div>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>City/Province</th>
      <th>Total Cases</th>
      <th>Active</th>
      <th>Recovered</th>
      <th>Death</th>
    </tr>
  </thead>
  <tbody style="overflow-y: auto;height: 200px">
    {% for city in cities %}
    <tr>
      <td> {{ city.0 }}</td>
      <td> {{ city.1 }}</td>
      <td> {{ city.2 }}</td>
      <td> {{ city.3 }}</td>
      <td> {{ city.4 }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div id="curve_chart" style="width: 900px; height: 500px"></div>
<div id="columnchart_material" style="width: 800px; height: 500px;"></div>
<div id="chart_div" style="width: 900px; height: 500px;"></div>


<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  google.charts.load('current', { 'packages': ['corechart'] });
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Date')
    data.addColumn('number', 'Confirmed');
    data.addColumn('number', 'Death');
    data.addColumn('number', 'Active');
    data.addColumn('number', 'Recovered');

    data.addRows({{ rows| safe}});

  var options = {
    title: 'Vietnam Covid 19 Cases',
    curveType: 'function',
    legend: { position: 'bottom' }
  };

  var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

  chart.draw(data, options);
    };
</script>

<script type="text/javascript">
  google.charts.load('current', { 'packages': ['bar'] });
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Date')
    data.addColumn('number', 'Male');
    data.addColumn('number', 'Female');
    data.addColumn('number', 'Total');

    data.addRows({{ sexs| safe }});


  var options = {
    chart: {
      title: 'Cases by Gender',
    }
  };

  var chart = new google.charts.Bar(document.getElementById('columnchart_material'));

  chart.draw(data, google.charts.Bar.convertOptions(options));
  }
</script>

<script type="text/javascript">
  google.charts.load("current", { packages: ["corechart"] });
  google.charts.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = new google.visualization.DataTable()
    data.addColumn('string', 'Patient')
    data.addColumn('number', 'Age')
    data.addRows({{ ages| safe}})

  var options = {
    title: 'Age of patients, in year',
    legend: { position: 'right' },
  };

  var chart = new google.visualization.Histogram(document.getElementById('chart_div'));
  chart.draw(data, options);
  }
</script>
{% endblock %}