{% extends "web/base.html" %}

{% block head %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load('current', {
        'packages': ['geochart'],
        // Note: you will need to get a mapsApiKey for your project.
        // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
        'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
    });
    google.charts.setOnLoadCallback(drawRegionsMap);

    function drawRegionsMap() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', "State")
        data.addColumn('number', 'Confirmed')
        {% for state in states %}
        data.addRow(['{{ state.0}}', {{ state.1 }}]);
    {% endfor %}

    var options = {
        region: 'US',
        colorAxis: { colors: ['green', 'yellow', 'orange', 'red'] },
        backgroundColor: '#81d4fa',
        datalessRegionColor: '#f8bbd0',
        defaultColor: '#f5f5f5',
        resolution: 'provinces'
    };

    var chart = new google.visualization.GeoChart(document.getElementById('geochart-colors'));
    chart.draw(data, options);
    };
</script>

<style>
    .tableFixHead {
        overflow-y: auto;
        height: 300px;
    }

    .tableFixHead thead th {
        position: sticky;
        top: 0;
    }

    /* Just common table stuff. Really. */
    table {
        border-collapse: collapse;
        width: 100%;
    }

    th,
    td {
        padding: 8px 16px;
    }

    th {
        background: #eee;
    }
</style>
{% endblock %}

{% block body %}

<body>
    <div id="geochart-colors" style="width: 80%; height: auto;"></div>
    <div class="tableFixHead">
        <table>
            <thead>
                <tr>
                    <th>State</th>
                    <th>Total Cases</th>
                    <th>Active</th>
                    <th>Recovered</th>
                    <th>Death</th>
                </tr>
            </thead>
            <tbody style="overflow-y: auto;height: 200px">
                {% for state in states %}
                <tr>
                    <td> {{ state.0 }}</td>
                    <td> {{ state.1 }}</td>
                    <td> {{ state.3 }}</td>
                    <td> {{ state.4 }}</td>
                    <td> {{ state.2 }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
{% endblock %}