{% extends "web/base.html" %}

{% block head%}
{% endblock %}

{% block body %}
<div class="container mt-5 mb-5" style="background-color: #fbf9f9;">
<h3>COVID-19 World map</h3>
<div class="w-100 h-75" id="regions_div" style="width: 80%; height: auto; margin: 0 auto; padding-bottom: 15px;"></div>
</div>
<div class="main-area">
  <div class="summary-cases mt-5">
    <h3 class="text-center">Summary of Cases Worldwide</h3>
    <div class="tableFixHead table-responsive">
      <table class="table table-bordered">
        <thead>
          <tr class="table text-center">
            <th scope="col">Country</th>
            <th scope="col">Total Cases</th>
            <th scope="col">Active</th>
            <th scope="col">Recovered</th>
            <th scope="col">Death</th>
          </tr>
        </thead>
        <tbody style="overflow-y: auto;height: 200px;">
          {% for country in countries %}
          <tr class="table text-center">
            <td scope="col">{{ country.0 }}</td>
            <td scope="col">{{ country.1 }}</td>
            <td scope="col">{{ country.3 }}</td>
            <td scope="col">{{ country.4 }}</td>
            <td scope="col">{{ country.2 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>





<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  google.charts.load('current', {
    'packages': ['geochart'],
    // Note: you will need to get a mapsApiKey for your project.
    // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
    'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
  });
  google.charts.setOnLoadCallback(drawRegionsMap);

  function drawRegionsMap() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Country');
    data.addColumn('number', 'Confirmed');
    data.addRows({{ table| safe}});

  var options = {
    colorAxis: { colors: ['#00853f', 'black', '#e31b23'] },
    backgroundColor: '#81d4fa',
    datalessRegionColor: '#f8bbd0',
    defaultColor: '#f5f5f5',
  };

  var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

  chart.draw(data, options);
    }
</script>

{% endblock %}